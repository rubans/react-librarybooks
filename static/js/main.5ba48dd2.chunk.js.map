{"version":3,"sources":["forms/UserForm.js","tables/UserTable.js","firebaseClient.js","users.js","forms/BookForm.js","tables/BookTable.js","context/authContext.js","books.js","login.js","PrivateRoute.js","forms/RegisterForm.js","utils.js","NavBar.js","App.js","index.js"],"names":["EditUserForm","props","initialFormState","currentUser","useState","user","setUser","console","log","JSON","stringify","editing","handleInputChange","event","target","name","value","onSubmit","preventDefault","updateUser","id","setViewMode","type","onChange","username","password","className","onClick","useStyles","makeStyles","table","minWidth","StyledTableCell","withStyles","theme","head","backgroundColor","palette","common","black","color","white","body","fontSize","TableCell","UserTable","classes","TableContainer","component","Paper","Table","size","aria-label","TableHead","TableRow","TableBody","users","length","map","key","scope","colSpan","firebase","require","initializeApp","apiKey","projectId","appId","authorize","a","auhorized","auth","signInWithEmailAndPassword","then","result","catch","error","updateBookInDB","book","db","firestore","collection","add","docRef","alert","doc","update","deleteBookInDB","delete","getBooksInDB","books","get","querySnapshot","docs","data","getUsersInDB","nextPageToken","Users","setUsers","useEffect","fetchData","setCurrentUser","mode","updatedUser","UserForm","style","display","justifyContent","editRow","deleteUser","filter","EditBookForm","currentBook","setBook","updateBook","BookTable","isAdmin","deleteBook","isLoggedIn","href","ownerEmail","escape","authContext","createContext","useAuth","useContext","authSignOut","sessionStorage","isSessionLoggedIn","signOut","AuthProvider","children","loading","setAuth","setAuthData","email","isSessionLoggedin","String","unsubscribe","onAuthStateChanged","Provider","Books","setBooks","setCurrentBook","updatedBook","BookForm","margin","Login","emailInput","setEmailInput","passwordInput","setPasswordInput","autoComplete","e","Error","redirectTo","location","state","from","pathname","history","push","aria-describedby","placeholder","to","PrivateRoute","Component","rest","render","RegisterForm","createUserWithEmailAndPassword","createUser","currentHref","match","path","loginHref","redirectToLogin","NavBar","Navbar","bg","variant","Nav","class","Collapse","Text","marginLeft","Home","App","authUser","exact","Register","rootElement","document","getElementById","ReactDOM"],"mappings":"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","file":"static/js/main.5ba48dd2.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\n\r\nconst EditUserForm = props => {\r\n  const initialFormState = props.currentUser\r\n  const [ user, setUser ] = useState(initialFormState)\r\n  console.log(\"props:\"+JSON.stringify(props))\r\n  console.log(\"editing:\"+props.editing)\r\n  //console.log(\"currentUser:\"+props.currentUser.id)\r\n\r\n  const handleInputChange = event => {\r\n    const { name, value } = event.target\r\n    setUser({ ...user, [name]: value })\r\n  }\r\n\r\n  return (\r\n    <form\r\n      onSubmit={event => {\r\n        event.preventDefault()\r\n        props.updateUser(user.id, user)\r\n        if(typeof props.setViewMode !== \"undefined\")\r\n        {\r\n          props.setViewMode(\"viewUser\")\r\n        }\r\n      }}\r\n    >\r\n      <label>Name</label>\r\n      <input type=\"text\" name=\"name\" value={user.name} onChange={handleInputChange} />\r\n      <label>Email</label>\r\n      <input type=\"text\" name=\"username\" value={user.username} onChange={handleInputChange} />\r\n      <label>Password</label>\r\n      <input type=\"text\" name=\"password\" value={user.password} onChange={handleInputChange} />\r\n      <button className=\"btn btn-primary\">Save</button>\r\n      <button onClick={() => props.setViewMode(\"viewUser\")} className=\"btn btn-danger\">\r\n        Cancel\r\n      </button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default EditUserForm\r\n","import React from 'react'\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n});\r\nconst StyledTableCell = withStyles(theme => ({\r\n  head: {\r\n    backgroundColor: theme.palette.common.black,\r\n    color: theme.palette.common.white,\r\n  },\r\n  body: {\r\n    fontSize: 14,\r\n  },\r\n}))(TableCell);\r\n\r\nconst UserTable = props => \r\n{\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table className={classes.table} size=\"small\" aria-label=\"a dense table\">\r\n        <TableHead>\r\n          <TableRow>\r\n            {/* <th>Name</th> */}\r\n            <StyledTableCell>Username</StyledTableCell>\r\n            {/* <th>Actions</th> */}\r\n          </TableRow>\r\n        </TableHead>\r\n      <TableBody>\r\n        {props.users.length > 0 ? (\r\n          props.users.map(user => (\r\n            <TableRow key={user.id}>\r\n            \r\n              {/* <td>{user.name}</td> */}\r\n              <TableCell component=\"th\" scope=\"row\">{user.username}</TableCell>\r\n              {/* <td>\r\n                <button\r\n                  onClick={() => {\r\n                    props.editRow(user)\r\n                  }}\r\n                  className=\"button muted-button\"\r\n                >\r\n                  Edit\r\n                </button>\r\n                <button\r\n                  onClick={() => props.deleteUser(user.id)}\r\n                  className=\"button muted-button\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </td> */}\r\n            </TableRow>\r\n          ))\r\n        ) : (\r\n          <TableRow>\r\n            <TableCell colSpan={3}>No users</TableCell>\r\n          </TableRow>\r\n        )}\r\n      </TableBody>\r\n    </Table>\r\n  </TableContainer>\r\n  )\r\n}\r\nexport default UserTable\r\n","export const firebase = require(\"firebase\");\r\nrequire(\"firebase/firestore\");\r\n// Initialize Cloud Firestore through Firebase\r\nvar config = {\r\n    apiKey: \"AIzaSyDh0dHvfYVmQobx7VyKNCD2WZ2UFAY6wMA\",\r\n    projectId: \"fast-planet-243821\",\r\n    appId: \"1:515007598211:web:d7f919e31f73d3463f15b6\"\r\n  }\r\nfirebase.initializeApp(config);\r\nconsole.log(\"Firebase initialized!\")\r\n\r\n// export const getCurrentUser = () =>{\r\n//     return firebase.auth().currentUser\r\n// }\r\n\r\nexport const authorize = (async (username, password) => {\r\n    var auhorized = false;\r\n    await firebase.auth().signInWithEmailAndPassword(username, password)\r\n        .then(function(result) {\r\n            auhorized = true;\r\n        })\r\n        .catch(function(error) {\r\n            // Handle Errors here.\r\n            console.error(\"Unauthorized with Firebase : \"+error);\r\n        });\r\n        console.log(\"Authorized with Firebase!\"+auhorized);\r\n        return auhorized;\r\n})\r\n\r\nexport const createUser = (email, password) => {\r\n    var db = firebase.firestore();\r\n    firebase.auth().createUserWithEmailAndPassword(email, password)\r\n    .then(function(){\r\n        // add username to tabel too\r\n        db.collection(\"Library_Users\").add({username:email})\r\n    })\r\n    .then(function(){\r\n        console.log(\"created user.\")\r\n    })\r\n    .catch(function(error) {\r\n        console.error(\"Error creating user: \", error);\r\n        alert(error);\r\n      });\r\n}\r\n\r\nexport const deauthorize = () => {\r\n    firebase.auth().signOut().then(function() {\r\n        // Sign-out successful.\r\n      }).catch(function(error) {\r\n        // An error happened.\r\n        console.log(\"Error with Firebase : \"+error);\r\n        alert(error);\r\n      });\r\n}\r\n\r\nexport const updateBookInDB = async (book) => {\r\n        console.log(\"createBook!\");\r\n        console.log(\"firebase:\"+JSON.stringify(firebase.auth()))\r\n        //console.log(\"cache created : \"+global.Date)\r\n        var db = firebase.firestore();\r\n        if(book.id === null)\r\n        {\r\n            await db.collection(\"Library_Books\").add(book)\r\n            .then(function(docRef) {\r\n                console.log(\"Document written with ID: \", docRef.id);\r\n            })\r\n            .catch(function(error) {\r\n                console.error(\"Error adding document: \", error);\r\n                alert(error);\r\n                //throw error;\r\n            });\r\n        }\r\n        else\r\n        {\r\n            await db.collection(\"Library_Books\").doc(book.id).update(book)\r\n            .then(function(docRef) {\r\n                console.log(\"Document written with ID: \", book.id);\r\n            })\r\n            .catch(function(error) {\r\n                console.error(\"Error adding document: \", error);\r\n                alert(error);\r\n                //throw error;\r\n            });\r\n        }\r\n    }\r\n\r\nexport const deleteBookInDB = async(id) => {\r\n    console.log(\"deleteBook!\");\r\n    //console.log(\"cache created : \"+global.Date)\r\n    var db = firebase.firestore();\r\n    await db.collection(\"Library_Books\").doc(id).delete()\r\n    .then(function(docRef) { \r\n        console.log(\"Document deleted with ID: \", id);\r\n    })\r\n    .catch(function(error) {\r\n        console.error(\"Error deleting document: \", error);\r\n        alert(error);\r\n        //throw error;\r\n    });\r\n}\r\n\r\nexport const getBooksInDB = (async () => {\r\n        console.log(\"getBooks!\");\r\n        var books = []\r\n        //console.log(\"cache created : \"+global.Date)\r\n        var db = firebase.firestore();\r\n        \r\n        await db.collection(\"Library_Books\").get()\r\n            .then(function(querySnapshot) {\r\n                books = querySnapshot.docs.map(doc => ({...doc.data(),id:doc.id}));\r\n                console.log(\"books:\"+JSON.stringify(books))\r\n            })\r\n            .catch(function(error) {\r\n                console.error(\"Error getting document: \", error);\r\n                alert(error);\r\n                //throw error;\r\n            });\r\n        console.log(\"All documents retrieved!\");\r\n        console.log(\"books : \"+JSON.stringify(books))\r\n        return books;\r\n})\r\n\r\nexport const getUsersInDB = (async (nextPageToken) => {\r\n    var users = []\r\n    console.log(\"getUsersInDB\")\r\n    var db = firebase.firestore();\r\n    await db.collection(\"Library_Users\").get()\r\n    .then(function(querySnapshot) {\r\n        users = querySnapshot.docs.map(doc => ({...doc.data(),id:doc.id}));\r\n        return users;\r\n    })\r\n    .catch(function(error) {\r\n        console.error(\"Error getting document: \", error);\r\n        alert(error);\r\n        //throw error;\r\n    });\r\n    console.log(\"users : \"+JSON.stringify(users))\r\n    console.log(\"All documents retrieved!\");\r\n    return users;\r\n  })\r\n","import React, { useState, Fragment, useEffect } from 'react'\r\nimport UserForm from './forms/UserForm'\r\nimport UserTable from './tables/UserTable'\r\nimport {getUsersInDB} from './firebaseClient'\r\n\r\nexport const initialFormState = { id: null, name: '', username: '', password: '' }\r\n\r\nconst Users = (props) => {\r\n\tconst[users, setUsers] = useState([]);\r\n\tuseEffect(() => {\r\n\t\tconst fetchData = async() => {\r\n\t\t\tconst data = await getUsersInDB();\r\n\t\t\tconsole.log(\"load data:\"+JSON.stringify(data))\r\n\t\t\tsetUsers(data)\r\n\t\t}\r\n\t\tfetchData()\r\n\t},[]);\r\n\t// Mock Data\r\n\t// const usersData = [\r\n\t// \t{ id: 1, name: 'Tania', username: 'floppydiskette' },\r\n\t// \t{ id: 2, name: 'Craig', username: 'siliconeidolon' },\r\n\t// \t{ id: 3, name: 'Ben', username: 'benisphere' },\r\n\t// ]\r\n\r\n\t//const initialFormState = initialFormState\r\n\t// Setting state\r\n\tconst [ currentUser, setCurrentUser ] = useState(initialFormState)\r\n\tconst [ mode, setViewMode ] = useState(\"view\")\r\n\r\n\t// CRUD operations\r\n\t// const addUser = () => {\r\n\t// \tsetViewMode(\"new\")\r\n\t// }\r\n\r\n\tconst deleteUser = id => {\r\n\t\tsetUsers(users.filter(user => user.id !== id))\r\n\t}\r\n\r\n\tconst updateUser = (id, updatedUser) => {\r\n\t\tsetUsers(users.map(user => (user.id === id ? updatedUser : user)))\r\n\t}\r\n\r\n\tconst editUser = user => {\r\n\t\tsetViewMode(\"edit\")\r\n\t\tsetCurrentUser({ id: user.id, name: user.name, username: user.username })\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t\t//loggedIn() ?\r\n\t\t\t (<div className=\"flex-row\">\r\n\t\t\t\t<div className=\"flex-large\">\r\n\t\t\t\t{(mode === \"edit\") ? (\r\n\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t<h3>Edit user</h3>\r\n\t\t\t\t\t\t\t<UserForm\r\n\t\t\t\t\t\t\t\tediting={true}\r\n\t\t\t\t\t\t\t\tsetViewMode={setViewMode}\r\n\t\t\t\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\t\t\t\tupdateUser={updateUser}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t</Fragment> ) : \r\n\t\t\t\t\t(mode === \"new\") ? \r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t<h3>Register</h3>\r\n\t\t\t\t\t\t\t\t<UserForm\r\n\t\t\t\t\t\t\t\t\tediting={false}\r\n\t\t\t\t\t\t\t\t\tsetViewMode={setViewMode}\r\n\t\t\t\t\t\t\t\t\tcurrentUser={initialFormState}\r\n\t\t\t\t\t\t\t\t\tupdateUser={updateUser}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Fragment> ) :\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t<div className=\"centered\">\r\n\t\t\t\t\t\t\t\t\t<h3>Users</h3>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n\t\t\t\t\t\t\t\t\t{/* <button\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => addUser()}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"button muted-button\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tAdd New User\r\n\t\t\t\t\t\t\t\t\t</button> */}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<UserTable users={users} editRow={editUser} deleteUser={deleteUser} />\r\n\t\t\t\t\t\t</Fragment> )}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t ) \r\n\t)\r\n}\r\n\r\nexport default Users\r\n","import React, { useState, useEffect } from 'react'\r\nimport {getUsersInDB} from './../firebaseClient'\r\n\r\nconst EditBookForm = props => {\r\n  const initialFormState = props.currentBook\r\n  const [ book, setBook ] = useState(initialFormState)\r\n  const [ users, setUsers] = useState([]);\r\n\tuseEffect(() => {\r\n    const fetchData = async() => {\r\n      const data = await getUsersInDB();\r\n      console.log(\"load book form user:\"+JSON.stringify(data))\r\n      setUsers(data)\r\n    }\r\n    fetchData()\r\n\t},[]);\r\n\r\n  const handleInputChange = event => {\r\n    const { name, value } = event.target\r\n    setBook({ ...book, [name]: value })\r\n  }\r\n  //console.log(\"bookform:\"+JSON.stringify(book))\r\n  return (\r\n    <div className=\"container\">\r\n      <form\r\n        onSubmit={event => {\r\n          event.preventDefault()\r\n          props.updateBook(book.id, book)\r\n          props.setViewMode(\"viewBook\")\r\n        }}\r\n      >\r\n        <label>Name</label>\r\n        <input type=\"text\" name=\"name\" value={book.name} onChange={handleInputChange} />\r\n        <label>Owner Email</label>\r\n        <select onChange={handleInputChange} name=\"ownerEmail\">\r\n        {\r\n          users.map(user => <option value={user.username}>{user.username}</option>)\r\n        }\r\n        </select>\r\n        <div className=\"centered\">\r\n          <button className=\"btn btn-primary\">Save</button>\r\n          <button onClick={() => props.setViewMode(\"viewBook\")} className=\"btn btn-danger\">\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EditBookForm\r\n","import React from 'react'\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n});\r\nconst StyledTableCell = withStyles(theme => ({\r\n  head: {\r\n    backgroundColor: theme.palette.common.black,\r\n    color: theme.palette.common.white,\r\n  },\r\n  body: {\r\n    fontSize: 14,\r\n  },\r\n}))(TableCell);\r\n\r\nconst BookTable = props => {\r\n  const classes = useStyles();\r\n  return (\r\n      <TableContainer component={Paper}>\r\n          <Table className={classes.table} size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <StyledTableCell>Book</StyledTableCell>\r\n                <StyledTableCell></StyledTableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {props.books.length > 0 ? (\r\n                props.books.map(book => (\r\n                  <TableRow key={book.id}>\r\n                      <TableCell component=\"th\" scope=\"row\">{book.name}</TableCell>\r\n                      <TableCell>\r\n                        <div style={props.isAdmin ? { display: \"flex\", justifyContent: \"flex-end\" }: { display : \"none\"}}>\r\n                            <button\r\n                              onClick={() => {\r\n                                props.editRow(book)\r\n                              }}\r\n                              className=\"btn btn-primary\"\r\n                            >\r\n                              Edit\r\n                            </button>\r\n                            <button\r\n                              onClick={() => props.deleteBook(book.id)}\r\n                              className=\"btn btn-danger\"\r\n                            >\r\n                              Delete\r\n                            </button>\r\n                          </div>\r\n                        <div style={(props.isLoggedIn && !props.isAdmin) ? { display: \"flex\", justifyContent: \"flex-end\" }: { display : \"none\"}}>\r\n                          <a href={`mailto:${book.ownerEmail}\r\n                            ?subject=Book Library Borrow Request - ${book.name}\r\n                            &body=Dear Sir/Madam,${escape('\\r\\n')} I'm interested in borrowing ${book.name}.${escape('\\r\\n')}Could you send me more information please?`}\r\n                            className=\"btn btn-primary\">\r\n                            Borrow\r\n                          </a>\r\n                        </div>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                ))\r\n              ) : (\r\n                <TableRow colSpan={3}><TableCell>No books</TableCell></TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n  )\r\n}\r\n\r\nexport default BookTable\r\n","import React, { createContext, useState, useEffect, useContext } from 'react';\r\n//import {useCurrentUser} from './userContext'\r\nimport { firebase, deauthorize } from '../firebaseClient'\r\n\r\nconst authContext = createContext({});\r\nexport const useAuth = () => {\r\n    return useContext(authContext);\r\n  };\r\n\r\nexport const authSignOut = () => {\r\n  sessionStorage.isSessionLoggedIn = false\r\n  deauthorize();\r\n}\r\n\r\nconst AuthProvider = ({ children }) => {\r\n  const [auth, setAuth] = useState({ loading: true, data: null, isAdmin : false, isLoggedIn : false, isSessionLoggedIn : false });\r\n// we will use loading later\r\n\r\n  const setAuthData = (data) => {\r\n    console.log(\"setAuthData:\"+JSON.stringify(data))\r\n    // create session for login\r\n    if (sessionStorage.isSessionLoggedIn) {\r\n      sessionStorage.isSessionLoggedIn = true;\r\n    } else {\r\n      sessionStorage.isSessionLoggedIn = true;\r\n    }\r\n    console.log(\"set Session:\"+sessionStorage.isSessionLoggedIn)\r\n    setAuth({data: data, \r\n      isAdmin : (data && data.email === \"admin@booklibrary.com\"), \r\n      isLoggedIn : (data !== null),\r\n      isSessionLoggedin : (sessionStorage.isSessionLoggedIn === String(true))\r\n    });\r\n  };\r\n // a function that will help us to add the user data in the auth;\r\n  \r\n // Subscribe to user on mount\r\n  // Because this sets state in the callback it will cause any ...\r\n  // ... component that utilizes this hook to re-render with the ...\r\n  // ... latest auth object.\r\n  useEffect(() => {\r\n    const unsubscribe = firebase.auth().onAuthStateChanged(user => {\r\n      if (user) {\r\n        setAuthData(user);\r\n      } else {\r\n        setAuthData(null);\r\n      }\r\n    });\r\n\r\n    // Cleanup subscription on unmount\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return (\r\n    <authContext.Provider value={{ auth, setAuthData }}>\r\n      {children}\r\n    </authContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthProvider;","import React, { useState, Fragment, useEffect } from 'react'\r\nimport BookForm from './forms/BookForm'\r\nimport BookTable from './tables/BookTable'\r\nimport { updateBookInDB, getBooksInDB, deleteBookInDB} from './firebaseClient'\r\nimport { useAuth } from './context/authContext'\r\n//import {loggedIn} from './userContext'\r\n\r\nconst Books = (props) => {\r\n\t//const[isAdmin,setAdmin] = useState(useAuth().auth.isAdmin)\r\n\tlet auth = useAuth().auth;\r\n\tconsole.log(\"admin:\"+JSON.stringify(auth))\r\n\t//const authUser = CurrentUser(firebase);\r\n\tconsole.log(\"book:\"+JSON.stringify(props))\r\n\t//console.log(\"isAuth1:\"+loggedIn())\r\n\tconst[books, setBooks] = useState([]);\r\n\tuseEffect(() => {\r\n\t\tconst fetchData = async() => {\r\n\t\t\tconst data = await getBooksInDB();\r\n\t\t\tconsole.log(\"load data:\"+JSON.stringify(data))\r\n\t\t\tsetBooks(data)\r\n\t\t}\r\n\t\tfetchData();\r\n\t},[]);\r\n\r\n\t// Mock Data\r\n\t// const booksData = \t[\r\n\t// \t{ id: null, name: 'Tania', ownerEmail: 'floppydiskette' }\r\n\t// ]\r\n\tconsole.log(\"loaded books:\"+JSON.stringify(books))\r\n\r\n\tconst initialFormState = { id: null, name: '', ownerEmail: '' }\r\n\r\n\t// Setting state\r\n\t//const [ books, setBooks ] = useState(booksData)\r\n\tconsole.log(\"set books:\"+JSON.stringify(books))\r\n\tconst [ currentBook, setCurrentBook ] = useState(initialFormState)\r\n\tconst [ mode, setViewMode ] = useState(\"view\")\r\n\r\n\t// CRUD operations\r\n\tconst addBookView = () => {\r\n\t\tsetViewMode(\"new\")\r\n\t}\r\n\r\n\tconst deleteBook = id => {\r\n\t\tdeleteBookInDB(id);\r\n\t\tsetBooks(books.filter(book => book.id !== id))\r\n\t}\r\n\r\n\tconst updateBook = (id, updatedBook) => {\r\n\t\tupdateBookInDB(updatedBook);\r\n\t\tsetBooks(books.map(book => (book.id === id ? updatedBook : book)))\r\n\t\tconsole.log(\"update book\"+JSON.stringify(books))\r\n\t}\r\n\r\n\tconst editBookView = book => {\r\n\t\tsetViewMode(\"edit\")\r\n\t\tsetCurrentBook({ id: book.id, name: book.name, ownerEmail: book.ownerEmail })\r\n\t}\r\n\r\n    \r\n    return (\r\n        <div className=\"container flex-row\">\r\n            <div className=\"flex-large\">\r\n            {(mode === \"edit\") ? (\r\n\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t<div className=\"centered\">\r\n\t\t\t\t\t\t\t\t<h3>Edit Book</h3>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<BookForm\r\n\t\t\t\t\t\t\t\tediting={true}\r\n\t\t\t\t\t\t\t\tsetViewMode={setViewMode}\r\n\t\t\t\t\t\t\t\tcurrentBook={currentBook}\r\n\t\t\t\t\t\t\t\tupdateBook={updateBook}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t</Fragment> ) : \r\n\t\t\t\t\t(mode === \"new\") ? \r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t<div className=\"centered\">\r\n\t\t\t\t\t\t\t\t\t<h3>Create Book</h3>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<BookForm\r\n\t\t\t\t\t\t\t\t\tediting={false}\r\n\t\t\t\t\t\t\t\t\tsetViewMode={setViewMode}\r\n\t\t\t\t\t\t\t\t\tcurrentBook={currentBook}\r\n\t\t\t\t\t\t\t\t\tupdateBook={updateBook}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Fragment> ) :\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t<div className=\"centered\">\r\n\t\t\t\t\t\t\t\t\t<h3>Books</h3>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div  style={auth.isAdmin ? { display: \"flex\", justifyContent: \"flex-end\", margin: \"10px\" }: { display : \"none\"}}>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => addBookView()}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tAdd New Book\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<BookTable books={books} editRow={editBookView} deleteBook={deleteBook} isAdmin={auth.isAdmin} isLoggedIn={auth.isLoggedIn} />\r\n\t\t\t\t\t\t</Fragment> )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Books","import React, {useState} from 'react'\r\nimport {Link} from \"react-router-dom\"\r\nimport {authorize} from './firebaseClient'\r\n\r\nconst Login = props => {\r\n    //console.log(\"login:\"+JSON.stringify(props.location.state.from.pathname))\r\n    const [emailInput, setEmailInput] = useState('')\r\n    const [passwordInput, setPasswordInput] = useState('')\r\n//    console.log(\"login history:\"+JSON.stringify(props.history))\r\n    const handleEmailChange = (e) => {\r\n        setEmailInput(e.target.value);\r\n    }\r\n\r\n    const handlePasswordChange = (e) => {\r\n        setPasswordInput(e.target.value);\r\n    }\r\n\r\n    const handleLoginSubmit = (e) => {\r\n        e.preventDefault();\r\n        console.log(\"history:\"+JSON.stringify(props))\r\n\r\n        authorize(emailInput,passwordInput).then(function(result) {\r\n            console.log(\"login successful!\"+result)\r\n            if(result)\r\n            {\r\n                //combination is good. Log them in.\r\n                //this token can be anything. You can use random.org to generate a random string;\r\n                //const token = '123456abcdef';\r\n                //sessionStorage.setItem('auth-token', token);\r\n                let redirectTo = (props.location.state) ? props.location.state.from.pathname : \"\"\r\n                console.log(\"redirect to :\"+JSON.stringify(redirectTo))\r\n                props.history.push(redirectTo);\r\n            }\r\n            else\r\n                throw new Error()\r\n        }).catch(function(error)\r\n        {\r\n            console.error(\"login unsuccessful!\"+error)\r\n            //bad combination\r\n            alert('wrong email or password combination');\r\n        })\r\n    }\r\n\r\nreturn (\r\n    <div className=\"container col-lg-3 center-block\">\r\n        <h3>Login In</h3>\r\n        <form autoComplete=\"off\" onSubmit={handleLoginSubmit}>\r\n            <div className=\"form-group\">\r\n                <input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                id=\"exampleInputEmail1\"\r\n                aria-describedby=\"emailHelp\"\r\n                placeholder=\"Enter email\"\r\n                value={emailInput}\r\n                onChange={handleEmailChange}\r\n                />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <input\r\n                type=\"password\"\r\n                autoComplete=\"new-password\"\r\n                className=\"form-control\"\r\n                id=\"exampleInputPassword1\"\r\n                placeholder=\"Password\"\r\n                value={passwordInput}\r\n                onChange={handlePasswordChange}\r\n                />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-primary\">\r\n                Submit\r\n            </button>\r\n            <Link to=\"/register\" className=\"btn btn-link\">Register</Link>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login","// This is used to determine if a user is authenticated and\r\n// if they are allowed to visit the page they navigated to.\r\n\r\n// If they are: they proceed to the page\r\n// If not: they are redirected to the login page.\r\nimport React from 'react'\r\nimport { useAuth } from './context/authContext'\r\nimport { Redirect, Route } from 'react-router-dom'\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n  const auth = useAuth().auth\r\n  console.log(\"Private Route, Logged User:\"+JSON.stringify(auth.isSessionLoggedin))\r\n  if (auth.loading) {\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={() => {\r\n          return <p>Loading...</p>;\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props =>\r\n        (auth.isSessionLoggedin) ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\r\n        )\r\n      }\r\n    />\r\n  )\r\n\r\n\r\n  // debug\r\n  // return (\r\n  //   <Route\r\n  //     {...rest}\r\n  //     render={props =>\r\n  //       <div>Logged in 1:{new String(loggedIn)}</div>\r\n  //     }\r\n  //   />\r\n  // )\r\n} \r\nexport default PrivateRoute;","import React from 'react'\r\nimport Users, {initialFormState} from '../users'\r\nimport UserForm from './UserForm'\r\nimport { redirectToLogin } from '../utils';\r\nimport {createUser} from '../firebaseClient'\r\n\r\nconst RegisterForm = props => {\r\n    const addUser = (id, user) => {\r\n        console.log(\"new user:\"+JSON.stringify(user))\r\n        // add to firebase\r\n        createUser(user.username, user.password)\r\n        redirectToLogin(props)\r\n\t}\r\n\r\n\r\n    return (<div><h3>Register</h3>\r\n        <UserForm\r\n            editing={true}\r\n            setViewMode={Users.setViewMode}\r\n            currentUser={initialFormState}\r\n            updateUser={addUser}\r\n        />\r\n        </div>)\r\n}\r\n\r\nexport default RegisterForm","// export const loggedIn = () => {\r\n// \tvar currentUser = getCurrentUser();\r\n// \tconsole.log('logged in CurrentUser:'+JSON.stringify(currentUser))\r\n// \tif (currentUser === null) {\r\n// \t\tconsole.log('no auth token set');\r\n// \t\treturn false;\r\n// \t\t//do something like redirect to login page\r\n// \t} else {\r\n// \t\treturn true\r\n// \t}\r\n// }\r\n\r\nexport const redirectToLogin = (props) => {\r\n\tlet currentHref = props.match.path\r\n\t\tconsole.log(\"current href :\"+currentHref)\r\n\t\tconst loginHref = {\r\n\t\t\tpathname: '/login',\r\n\t\t\tstate: { from: {pathname: currentHref} }\r\n\t\t}\r\n\tprops.history.push(loginHref)\t\r\n}","import React from 'react'\r\nimport { Nav,Navbar } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAuth, authSignOut } from './context/authContext'\r\n\r\n\r\n\r\n\r\nconst NavBar = (props) => {\r\n\tconst signOut = () => {\r\n\t\tauthSignOut();\r\n\t}\r\n\tconst user = useAuth().auth.data\r\n\tconsole.log(\"Nav Bar User:\"+JSON.stringify(user))\r\n\tlet isAdmin = useAuth().auth.isAdmin\r\n\tlet email = (user) ? user.email : \"\"\r\n\treturn (\r\n\t<Navbar bg=\"primary\" variant=\"dark\">\r\n\t\t\t\t\t<Nav className=\"mr-auto\">\r\n\t\t\t\t\t\t<Link to=\"/\" class=\"nav-link\">Home</Link>\r\n\t\t\t\t\t\t{(isAdmin) ? \r\n\t\t\t\t\t\t\t(<Link to=\"/users\" class=\"nav-link\">Users</Link>) : (\"\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<Link to=\"/books\" class=\"nav-link\">Books</Link>\r\n\t\t\t\t\t</Nav>\r\n\t\t\t\t\t<Navbar.Collapse className=\"justify-content-end\">\r\n\t\t\t\t\t\t{(email !== \"\") ?\r\n\t\t\t\t\t\t\t(<div><Navbar.Text>\r\n\t\t\t\t\t\t\t\tSigned in as : <a href=\"#login\">{email}</a>\r\n\t\t\t\t\t\t\t</Navbar.Text>\r\n\t\t\t\t\t\t\t<button onClick={() => signOut()} className=\"bg-light btn my-2 my-sm-0\" style={{marginLeft:\"10px\"}}>Signout</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t: (<a href=\"/Login\" className=\"bg-light btn my-2 my-sm-0\" >Login</a>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t</Navbar.Collapse>\r\n\t\t\t\t</Navbar>\r\n\t\t)\r\n\t}\r\n\r\nexport default NavBar;","import React from 'react'\r\nimport Users from './users'\r\nimport Books from './books'\r\nimport Login from './login'\r\nimport PrivateRoute from './PrivateRoute'\r\nimport Register from './forms/RegisterForm'\r\n//import {useCurrentUser} from './context/userContext'\r\nimport AuthProvider, {useAuth} from './context/authContext'\r\nimport NavBar from './NavBar'\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tRoute,\r\n}from \"react-router-dom\";\r\nconst App = (props) => {\r\n\tconst { authUser } = useAuth();\r\n\t// let authUser = useCurrentUser()\r\n\t// setAuthData(authUser)\r\n\t\r\n\tconsole.log('Rendering App...');\r\n  \tconsole.log(\"App Props:\"+JSON.stringify(props))\r\n\tconsole.log(\"App auth User:\"+JSON.stringify(authUser))\r\n\treturn (\r\n\t\t<AuthProvider>\r\n\t\t<Router>\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<NavBar/>\r\n\t\t\t</div>\r\n\t\t\t<br/>\r\n\t\t\t<Route path=\"/\" exact component={Home} />\r\n\t\t\t<Route path=\"/login\" exact component={Login} />\r\n\t\t\t{/* <Route path=\"/users\" render={(props) => <Users {...props} />}/> */}\r\n\t\t\t<PrivateRoute path='/users' component={Users} />\r\n\t\t\t<Route path=\"/books\" render={(props) => <Books {...props} />} />\r\n\t\t\t<Route path=\"/register\" exact component={Register}/>\r\n\t\t</Router>\r\n\t\t</AuthProvider>\r\n\t)\r\n}\r\nconst Home = () => {\r\n\treturn (<div className=\"container\">\r\n\t\t\t\t<h2>Home page</h2>\r\n\t\t\t\t<blockquote>Welcome to the Book Library!</blockquote>\r\n\t\t\t</div>);\r\n}\r\n  \r\n\r\nexport default App\r\n","import 'bootstrap/dist/css/bootstrap.min.css'\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(<App />, rootElement);\r\n"],"sourceRoot":""}