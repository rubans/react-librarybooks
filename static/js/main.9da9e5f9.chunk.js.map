{"version":3,"sources":["forms/UserForm.js","tables/UserTable.js","firebaseClient.js","users.js","forms/BookForm.js","tables/BookTable.js","context/authContext.js","books.js","login.js","PrivateRoute.js","forms/RegisterForm.js","utils.js","NavBar.js","App.js","index.js"],"names":["EditUserForm","props","initialFormState","currentUser","useState","user","setUser","console","log","JSON","stringify","editing","handleInputChange","event","target","name","value","onSubmit","preventDefault","updateUser","id","setViewMode","type","onChange","username","password","className","onClick","UserTable","users","length","map","key","colSpan","firebase","require","initializeApp","apiKey","projectId","appId","authorize","a","auhorized","auth","signInWithEmailAndPassword","then","result","catch","error","updateBookInDB","book","db","firestore","collection","add","docRef","alert","doc","update","deleteBookInDB","delete","getBooksInDB","books","get","querySnapshot","docs","data","getUsersInDB","nextPageToken","Users","setUsers","useEffect","fetchData","setCurrentUser","mode","updatedUser","UserForm","style","display","justifyContent","editRow","deleteUser","filter","EditBookForm","currentBook","setBook","updateBook","BookTable","class","isAdmin","deleteBook","isLoggedIn","href","ownerEmail","escape","authContext","createContext","useAuth","useContext","authSignOut","sessionStorage","isSessionLoggedIn","signOut","AuthProvider","children","loading","setAuth","setAuthData","email","isSessionLoggedin","String","unsubscribe","onAuthStateChanged","Provider","Books","setBooks","setCurrentBook","updatedBook","BookForm","margin","Login","emailInput","setEmailInput","passwordInput","setPasswordInput","autoComplete","e","Error","redirectTo","location","state","from","pathname","history","push","aria-describedby","placeholder","to","PrivateRoute","Component","component","rest","render","RegisterForm","createUserWithEmailAndPassword","createUser","currentHref","match","path","loginHref","redirectToLogin","NavBar","Navbar","bg","variant","Nav","Link","Collapse","Text","marginLeft","Home","App","authUser","exact","Register","rootElement","document","getElementById","ReactDOM"],"mappings":"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","file":"static/js/main.9da9e5f9.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\n\r\nconst EditUserForm = props => {\r\n  const initialFormState = props.currentUser\r\n  const [ user, setUser ] = useState(initialFormState)\r\n  console.log(\"props:\"+JSON.stringify(props))\r\n  console.log(\"editing:\"+props.editing)\r\n  //console.log(\"currentUser:\"+props.currentUser.id)\r\n\r\n  const handleInputChange = event => {\r\n    const { name, value } = event.target\r\n    setUser({ ...user, [name]: value })\r\n  }\r\n\r\n  return (\r\n    <form\r\n      onSubmit={event => {\r\n        event.preventDefault()\r\n        props.updateUser(user.id, user)\r\n        if(typeof props.setViewMode !== \"undefined\")\r\n        {\r\n          props.setViewMode(\"viewUser\")\r\n        }\r\n      }}\r\n    >\r\n      <label>Name</label>\r\n      <input type=\"text\" name=\"name\" value={user.name} onChange={handleInputChange} />\r\n      <label>Email</label>\r\n      <input type=\"text\" name=\"username\" value={user.username} onChange={handleInputChange} />\r\n      <label>Password</label>\r\n      <input type=\"text\" name=\"password\" value={user.password} onChange={handleInputChange} />\r\n      <button className=\"btn btn-primary\">Save</button>\r\n      <button onClick={() => props.setViewMode(\"viewUser\")} className=\"btn btn-danger\">\r\n        Cancel\r\n      </button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default EditUserForm\r\n","import React from 'react'\r\n\r\nconst UserTable = props => (\r\n  <table>\r\n    <thead>\r\n      <tr>\r\n        {/* <th>Name</th> */}\r\n        <th>Username</th>\r\n        {/* <th>Actions</th> */}\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      {props.users.length > 0 ? (\r\n        props.users.map(user => (\r\n          <tr key={user.id}>\r\n            {/* <td>{user.name}</td> */}\r\n            <td>{user.username}</td>\r\n            {/* <td>\r\n              <button\r\n                onClick={() => {\r\n                  props.editRow(user)\r\n                }}\r\n                className=\"button muted-button\"\r\n              >\r\n                Edit\r\n              </button>\r\n              <button\r\n                onClick={() => props.deleteUser(user.id)}\r\n                className=\"button muted-button\"\r\n              >\r\n                Delete\r\n              </button>\r\n            </td> */}\r\n          </tr>\r\n        ))\r\n      ) : (\r\n        <tr>\r\n          <td colSpan={3}>No users</td>\r\n        </tr>\r\n      )}\r\n    </tbody>\r\n  </table>\r\n)\r\n\r\nexport default UserTable\r\n","export const firebase = require(\"firebase\");\r\nrequire(\"firebase/firestore\");\r\n// Initialize Cloud Firestore through Firebase\r\nvar config = {\r\n    apiKey: \"AIzaSyDh0dHvfYVmQobx7VyKNCD2WZ2UFAY6wMA\",\r\n    projectId: \"fast-planet-243821\",\r\n    appId: \"1:515007598211:web:d7f919e31f73d3463f15b6\"\r\n  }\r\nfirebase.initializeApp(config);\r\nconsole.log(\"Firebase initialized!\")\r\n\r\n// export const getCurrentUser = () =>{\r\n//     return firebase.auth().currentUser\r\n// }\r\n\r\nexport const authorize = (async (username, password) => {\r\n    var auhorized = false;\r\n    await firebase.auth().signInWithEmailAndPassword(username, password)\r\n        .then(function(result) {\r\n            auhorized = true;\r\n        })\r\n        .catch(function(error) {\r\n            // Handle Errors here.\r\n            console.error(\"Unauthorized with Firebase : \"+error);\r\n        });\r\n        console.log(\"Authorized with Firebase!\"+auhorized);\r\n        return auhorized;\r\n})\r\n\r\nexport const createUser = (email, password) => {\r\n    var db = firebase.firestore();\r\n    firebase.auth().createUserWithEmailAndPassword(email, password)\r\n    .then(function(){\r\n        // add username to tabel too\r\n        db.collection(\"Library_Users\").add({username:email})\r\n    })\r\n    .then(function(){\r\n        console.log(\"created user.\")\r\n    })\r\n    .catch(function(error) {\r\n        console.error(\"Error creating user: \", error);\r\n        alert(error);\r\n      });\r\n}\r\n\r\nexport const deauthorize = () => {\r\n    firebase.auth().signOut().then(function() {\r\n        // Sign-out successful.\r\n      }).catch(function(error) {\r\n        // An error happened.\r\n        console.log(\"Error with Firebase : \"+error);\r\n        alert(error);\r\n      });\r\n}\r\n\r\nexport const updateBookInDB = async (book) => {\r\n        console.log(\"createBook!\");\r\n        console.log(\"firebase:\"+JSON.stringify(firebase.auth()))\r\n        //console.log(\"cache created : \"+global.Date)\r\n        var db = firebase.firestore();\r\n        if(book.id === null)\r\n        {\r\n            await db.collection(\"Library_Books\").add(book)\r\n            .then(function(docRef) {\r\n                console.log(\"Document written with ID: \", docRef.id);\r\n            })\r\n            .catch(function(error) {\r\n                console.error(\"Error adding document: \", error);\r\n                alert(error);\r\n                //throw error;\r\n            });\r\n        }\r\n        else\r\n        {\r\n            await db.collection(\"Library_Books\").doc(book.id).update(book)\r\n            .then(function(docRef) {\r\n                console.log(\"Document written with ID: \", book.id);\r\n            })\r\n            .catch(function(error) {\r\n                console.error(\"Error adding document: \", error);\r\n                alert(error);\r\n                //throw error;\r\n            });\r\n        }\r\n    }\r\n\r\nexport const deleteBookInDB = async(id) => {\r\n    console.log(\"deleteBook!\");\r\n    //console.log(\"cache created : \"+global.Date)\r\n    var db = firebase.firestore();\r\n    await db.collection(\"Library_Books\").doc(id).delete()\r\n    .then(function(docRef) { \r\n        console.log(\"Document deleted with ID: \", id);\r\n    })\r\n    .catch(function(error) {\r\n        console.error(\"Error deleting document: \", error);\r\n        alert(error);\r\n        //throw error;\r\n    });\r\n}\r\n\r\nexport const getBooksInDB = (async () => {\r\n        console.log(\"getBooks!\");\r\n        var books = []\r\n        //console.log(\"cache created : \"+global.Date)\r\n        var db = firebase.firestore();\r\n        \r\n        await db.collection(\"Library_Books\").get()\r\n            .then(function(querySnapshot) {\r\n                books = querySnapshot.docs.map(doc => ({...doc.data(),id:doc.id}));\r\n                console.log(\"books:\"+JSON.stringify(books))\r\n            })\r\n            .catch(function(error) {\r\n                console.error(\"Error getting document: \", error);\r\n                alert(error);\r\n                //throw error;\r\n            });\r\n        console.log(\"All documents retrieved!\");\r\n        console.log(\"books : \"+JSON.stringify(books))\r\n        return books;\r\n})\r\n\r\nexport const getUsersInDB = (async (nextPageToken) => {\r\n    var users = []\r\n    console.log(\"getUsersInDB\")\r\n    var db = firebase.firestore();\r\n    await db.collection(\"Library_Users\").get()\r\n    .then(function(querySnapshot) {\r\n        users = querySnapshot.docs.map(doc => ({...doc.data(),id:doc.id}));\r\n        return users;\r\n    })\r\n    .catch(function(error) {\r\n        console.error(\"Error getting document: \", error);\r\n        alert(error);\r\n        //throw error;\r\n    });\r\n    console.log(\"users : \"+JSON.stringify(users))\r\n    console.log(\"All documents retrieved!\");\r\n    return users;\r\n  })\r\n","import React, { useState, Fragment, useEffect } from 'react'\r\nimport UserForm from './forms/UserForm'\r\nimport UserTable from './tables/UserTable'\r\nimport {getUsersInDB} from './firebaseClient'\r\n\r\nexport const initialFormState = { id: null, name: '', username: '', password: '' }\r\n\r\nconst Users = (props) => {\r\n\tconst[users, setUsers] = useState([]);\r\n\tuseEffect(() => {\r\n\t\tconst fetchData = async() => {\r\n\t\t\tconst data = await getUsersInDB();\r\n\t\t\tconsole.log(\"load data:\"+JSON.stringify(data))\r\n\t\t\tsetUsers(data)\r\n\t\t}\r\n\t\tfetchData()\r\n\t},[]);\r\n\t// Mock Data\r\n\t// const usersData = [\r\n\t// \t{ id: 1, name: 'Tania', username: 'floppydiskette' },\r\n\t// \t{ id: 2, name: 'Craig', username: 'siliconeidolon' },\r\n\t// \t{ id: 3, name: 'Ben', username: 'benisphere' },\r\n\t// ]\r\n\r\n\t//const initialFormState = initialFormState\r\n\t// Setting state\r\n\tconst [ currentUser, setCurrentUser ] = useState(initialFormState)\r\n\tconst [ mode, setViewMode ] = useState(\"view\")\r\n\r\n\t// CRUD operations\r\n\t// const addUser = () => {\r\n\t// \tsetViewMode(\"new\")\r\n\t// }\r\n\r\n\tconst deleteUser = id => {\r\n\t\tsetUsers(users.filter(user => user.id !== id))\r\n\t}\r\n\r\n\tconst updateUser = (id, updatedUser) => {\r\n\t\tsetUsers(users.map(user => (user.id === id ? updatedUser : user)))\r\n\t}\r\n\r\n\tconst editUser = user => {\r\n\t\tsetViewMode(\"edit\")\r\n\t\tsetCurrentUser({ id: user.id, name: user.name, username: user.username })\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t\t//loggedIn() ?\r\n\t\t\t (<div className=\"flex-row\">\r\n\t\t\t\t<div className=\"flex-large\">\r\n\t\t\t\t{(mode === \"edit\") ? (\r\n\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t<h3>Edit user</h3>\r\n\t\t\t\t\t\t\t<UserForm\r\n\t\t\t\t\t\t\t\tediting={true}\r\n\t\t\t\t\t\t\t\tsetViewMode={setViewMode}\r\n\t\t\t\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\t\t\t\tupdateUser={updateUser}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t</Fragment> ) : \r\n\t\t\t\t\t(mode === \"new\") ? \r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t<h3>Register</h3>\r\n\t\t\t\t\t\t\t\t<UserForm\r\n\t\t\t\t\t\t\t\t\tediting={false}\r\n\t\t\t\t\t\t\t\t\tsetViewMode={setViewMode}\r\n\t\t\t\t\t\t\t\t\tcurrentUser={initialFormState}\r\n\t\t\t\t\t\t\t\t\tupdateUser={updateUser}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Fragment> ) :\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t<div className=\"centered\">\r\n\t\t\t\t\t\t\t\t\t<h3>Users</h3>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n\t\t\t\t\t\t\t\t\t{/* <button\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => addUser()}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"button muted-button\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tAdd New User\r\n\t\t\t\t\t\t\t\t\t</button> */}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<UserTable users={users} editRow={editUser} deleteUser={deleteUser} />\r\n\t\t\t\t\t\t</Fragment> )}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t ) \r\n\t)\r\n}\r\n\r\nexport default Users\r\n","import React, { useState, useEffect } from 'react'\r\nimport {getUsersInDB} from './../firebaseClient'\r\n\r\nconst EditBookForm = props => {\r\n  const initialFormState = props.currentBook\r\n  const [ book, setBook ] = useState(initialFormState)\r\n  const [ users, setUsers] = useState([]);\r\n\tuseEffect(() => {\r\n    const fetchData = async() => {\r\n      const data = await getUsersInDB();\r\n      console.log(\"load book form user:\"+JSON.stringify(data))\r\n      setUsers(data)\r\n    }\r\n    fetchData()\r\n\t},[]);\r\n\r\n  const handleInputChange = event => {\r\n    const { name, value } = event.target\r\n    setBook({ ...book, [name]: value })\r\n  }\r\n  //console.log(\"bookform:\"+JSON.stringify(book))\r\n  return (\r\n    <div className=\"container\">\r\n      <form\r\n        onSubmit={event => {\r\n          event.preventDefault()\r\n          props.updateBook(book.id, book)\r\n          props.setViewMode(\"viewBook\")\r\n        }}\r\n      >\r\n        <label>Name</label>\r\n        <input type=\"text\" name=\"name\" value={book.name} onChange={handleInputChange} />\r\n        <label>Owner Email</label>\r\n        <select onChange={handleInputChange} name=\"ownerEmail\">\r\n        {\r\n          users.map(user => <option value={user.username}>{user.username}</option>)\r\n        }\r\n        </select>\r\n        <div className=\"centered\">\r\n          <button className=\"btn btn-primary\">Save</button>\r\n          <button onClick={() => props.setViewMode(\"viewBook\")} className=\"btn btn-danger\">\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EditBookForm\r\n","import React from 'react'\r\n\r\nconst BookTable = props => (\r\n  <table class=\"table table-bordered\">\r\n    <thead>  \r\n      <tr className=\"table-primary\">\r\n        <th>Book</th>\r\n        <th></th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      {props.books.length > 0 ? (\r\n        props.books.map(book => (\r\n          <tr key={book.id}>\r\n            <td>{book.name}</td>\r\n            <td>\r\n            <div style={props.isAdmin ? { display: \"flex\", justifyContent: \"flex-end\" }: { display : \"none\"}}>\r\n                <button\r\n                  onClick={() => {\r\n                    props.editRow(book)\r\n                  }}\r\n                  className=\"btn btn-primary\"\r\n                >\r\n                  Edit\r\n                </button>\r\n                <button\r\n                  onClick={() => props.deleteBook(book.id)}\r\n                  className=\"btn btn-danger\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </div>\r\n              <div style={(props.isLoggedIn && !props.isAdmin) ? { display: \"flex\", justifyContent: \"flex-end\" }: { display : \"none\"}}>\r\n                <a href={`mailto:${book.ownerEmail}\r\n                  ?subject=Book Library Borrow Request - ${book.name}\r\n                  &body=Dear Sir/Madam,${escape('\\r\\n')} I'm interested in borrowing ${book.name}.${escape('\\r\\n')}Could you send me more information please?`}\r\n                  className=\"button muted-button\">\r\n                  Borrow\r\n                </a>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        ))\r\n      ) : (\r\n        <tr>\r\n          <td colSpan={3}>No books</td>\r\n        </tr>\r\n      )}\r\n    </tbody>\r\n  </table>\r\n)\r\n\r\nexport default BookTable\r\n","import React, { createContext, useState, useEffect, useContext } from 'react';\r\n//import {useCurrentUser} from './userContext'\r\nimport { firebase, deauthorize } from '../firebaseClient'\r\n\r\nconst authContext = createContext({});\r\nexport const useAuth = () => {\r\n    return useContext(authContext);\r\n  };\r\n\r\nexport const authSignOut = () => {\r\n  sessionStorage.isSessionLoggedIn = false\r\n  deauthorize();\r\n}\r\n\r\nconst AuthProvider = ({ children }) => {\r\n  const [auth, setAuth] = useState({ loading: true, data: null, isAdmin : false, isLoggedIn : false, isSessionLoggedIn : false });\r\n// we will use loading later\r\n\r\n  const setAuthData = (data) => {\r\n    console.log(\"setAuthData:\"+JSON.stringify(data))\r\n    // create session for login\r\n    if (sessionStorage.isSessionLoggedIn) {\r\n      sessionStorage.isSessionLoggedIn = true;\r\n    } else {\r\n      sessionStorage.isSessionLoggedIn = true;\r\n    }\r\n    console.log(\"set Session:\"+sessionStorage.isSessionLoggedIn)\r\n    setAuth({data: data, \r\n      isAdmin : (data && data.email === \"admin@booklibrary.com\"), \r\n      isLoggedIn : (data !== null),\r\n      isSessionLoggedin : (sessionStorage.isSessionLoggedIn === String(true))\r\n    });\r\n  };\r\n // a function that will help us to add the user data in the auth;\r\n  \r\n // Subscribe to user on mount\r\n  // Because this sets state in the callback it will cause any ...\r\n  // ... component that utilizes this hook to re-render with the ...\r\n  // ... latest auth object.\r\n  useEffect(() => {\r\n    const unsubscribe = firebase.auth().onAuthStateChanged(user => {\r\n      if (user) {\r\n        setAuthData(user);\r\n      } else {\r\n        setAuthData(null);\r\n      }\r\n    });\r\n\r\n    // Cleanup subscription on unmount\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return (\r\n    <authContext.Provider value={{ auth, setAuthData }}>\r\n      {children}\r\n    </authContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthProvider;","import React, { useState, Fragment, useEffect } from 'react'\r\nimport BookForm from './forms/BookForm'\r\nimport BookTable from './tables/BookTable'\r\nimport { updateBookInDB, getBooksInDB, deleteBookInDB} from './firebaseClient'\r\nimport { useAuth } from './context/authContext'\r\n//import {loggedIn} from './userContext'\r\n\r\nconst Books = (props) => {\r\n\t//const[isAdmin,setAdmin] = useState(useAuth().auth.isAdmin)\r\n\tlet auth = useAuth().auth;\r\n\tconsole.log(\"admin:\"+JSON.stringify(auth))\r\n\t//const authUser = CurrentUser(firebase);\r\n\tconsole.log(\"book:\"+JSON.stringify(props))\r\n\t//console.log(\"isAuth1:\"+loggedIn())\r\n\tconst[books, setBooks] = useState([]);\r\n\tuseEffect(() => {\r\n\t\tconst fetchData = async() => {\r\n\t\t\tconst data = await getBooksInDB();\r\n\t\t\tconsole.log(\"load data:\"+JSON.stringify(data))\r\n\t\t\tsetBooks(data)\r\n\t\t}\r\n\t\tfetchData();\r\n\t},[]);\r\n\r\n\t// Mock Data\r\n\t// const booksData = \t[\r\n\t// \t{ id: null, name: 'Tania', ownerEmail: 'floppydiskette' }\r\n\t// ]\r\n\tconsole.log(\"loaded books:\"+JSON.stringify(books))\r\n\r\n\tconst initialFormState = { id: null, name: '', ownerEmail: '' }\r\n\r\n\t// Setting state\r\n\t//const [ books, setBooks ] = useState(booksData)\r\n\tconsole.log(\"set books:\"+JSON.stringify(books))\r\n\tconst [ currentBook, setCurrentBook ] = useState(initialFormState)\r\n\tconst [ mode, setViewMode ] = useState(\"view\")\r\n\r\n\t// CRUD operations\r\n\tconst addBookView = () => {\r\n\t\tsetViewMode(\"new\")\r\n\t}\r\n\r\n\tconst deleteBook = id => {\r\n\t\tdeleteBookInDB(id);\r\n\t\tsetBooks(books.filter(book => book.id !== id))\r\n\t}\r\n\r\n\tconst updateBook = (id, updatedBook) => {\r\n\t\tupdateBookInDB(updatedBook);\r\n\t\tsetBooks(books.map(book => (book.id === id ? updatedBook : book)))\r\n\t\tconsole.log(\"update book\"+JSON.stringify(books))\r\n\t}\r\n\r\n\tconst editBookView = book => {\r\n\t\tsetViewMode(\"edit\")\r\n\t\tsetCurrentBook({ id: book.id, name: book.name, ownerEmail: book.ownerEmail })\r\n\t}\r\n\r\n    \r\n    return (\r\n        <div className=\"container flex-row\">\r\n            <div className=\"flex-large\">\r\n            {(mode === \"edit\") ? (\r\n\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t<div className=\"centered\">\r\n\t\t\t\t\t\t\t\t<h3>Edit Book</h3>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<BookForm\r\n\t\t\t\t\t\t\t\tediting={true}\r\n\t\t\t\t\t\t\t\tsetViewMode={setViewMode}\r\n\t\t\t\t\t\t\t\tcurrentBook={currentBook}\r\n\t\t\t\t\t\t\t\tupdateBook={updateBook}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t</Fragment> ) : \r\n\t\t\t\t\t(mode === \"new\") ? \r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t<div className=\"centered\">\r\n\t\t\t\t\t\t\t\t\t<h3>Create Book</h3>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<BookForm\r\n\t\t\t\t\t\t\t\t\tediting={false}\r\n\t\t\t\t\t\t\t\t\tsetViewMode={setViewMode}\r\n\t\t\t\t\t\t\t\t\tcurrentBook={currentBook}\r\n\t\t\t\t\t\t\t\t\tupdateBook={updateBook}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Fragment> ) :\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t<div className=\"centered\">\r\n\t\t\t\t\t\t\t\t\t<h3>Books</h3>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div  style={auth.isAdmin ? { display: \"flex\", justifyContent: \"flex-end\", margin: \"10px\" }: { display : \"none\"}}>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => addBookView()}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tAdd New Book\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<BookTable books={books} editRow={editBookView} deleteBook={deleteBook} isAdmin={auth.isAdmin} isLoggedIn={auth.isLoggedIn} />\r\n\t\t\t\t\t\t</Fragment> )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Books","import React, {useState} from 'react'\r\nimport {Link} from \"react-router-dom\"\r\nimport {authorize} from './firebaseClient'\r\n\r\nconst Login = props => {\r\n    //console.log(\"login:\"+JSON.stringify(props.location.state.from.pathname))\r\n    const [emailInput, setEmailInput] = useState('')\r\n    const [passwordInput, setPasswordInput] = useState('')\r\n//    console.log(\"login history:\"+JSON.stringify(props.history))\r\n    const handleEmailChange = (e) => {\r\n        setEmailInput(e.target.value);\r\n    }\r\n\r\n    const handlePasswordChange = (e) => {\r\n        setPasswordInput(e.target.value);\r\n    }\r\n\r\n    const handleLoginSubmit = (e) => {\r\n        e.preventDefault();\r\n        console.log(\"history:\"+JSON.stringify(props))\r\n\r\n        authorize(emailInput,passwordInput).then(function(result) {\r\n            console.log(\"login successful!\"+result)\r\n            if(result)\r\n            {\r\n                //combination is good. Log them in.\r\n                //this token can be anything. You can use random.org to generate a random string;\r\n                //const token = '123456abcdef';\r\n                //sessionStorage.setItem('auth-token', token);\r\n                let redirectTo = (props.location.state) ? props.location.state.from.pathname : \"\"\r\n                console.log(\"redirect to :\"+JSON.stringify(redirectTo))\r\n                props.history.push(redirectTo);\r\n            }\r\n            else\r\n                throw new Error()\r\n        }).catch(function(error)\r\n        {\r\n            console.error(\"login unsuccessful!\"+error)\r\n            //bad combination\r\n            alert('wrong email or password combination');\r\n        })\r\n    }\r\n\r\nreturn (\r\n    <div className=\"container col-lg-3 center-block\">\r\n        <h3>Login In</h3>\r\n        <form autoComplete=\"off\" onSubmit={handleLoginSubmit}>\r\n            <div className=\"form-group\">\r\n                <input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                id=\"exampleInputEmail1\"\r\n                aria-describedby=\"emailHelp\"\r\n                placeholder=\"Enter email\"\r\n                value={emailInput}\r\n                onChange={handleEmailChange}\r\n                />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <input\r\n                type=\"password\"\r\n                autoComplete=\"new-password\"\r\n                className=\"form-control\"\r\n                id=\"exampleInputPassword1\"\r\n                placeholder=\"Password\"\r\n                value={passwordInput}\r\n                onChange={handlePasswordChange}\r\n                />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-primary\">\r\n                Submit\r\n            </button>\r\n            <Link to=\"/register\" className=\"btn btn-link\">Register</Link>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login","// This is used to determine if a user is authenticated and\r\n// if they are allowed to visit the page they navigated to.\r\n\r\n// If they are: they proceed to the page\r\n// If not: they are redirected to the login page.\r\nimport React from 'react'\r\nimport { useAuth } from './context/authContext'\r\nimport { Redirect, Route } from 'react-router-dom'\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n  const auth = useAuth().auth\r\n  console.log(\"Private Route, Logged User:\"+JSON.stringify(auth.isSessionLoggedin))\r\n  if (auth.loading) {\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={() => {\r\n          return <p>Loading...</p>;\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props =>\r\n        (auth.isSessionLoggedin) ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\r\n        )\r\n      }\r\n    />\r\n  )\r\n\r\n\r\n  // debug\r\n  // return (\r\n  //   <Route\r\n  //     {...rest}\r\n  //     render={props =>\r\n  //       <div>Logged in 1:{new String(loggedIn)}</div>\r\n  //     }\r\n  //   />\r\n  // )\r\n} \r\nexport default PrivateRoute;","import React from 'react'\r\nimport Users, {initialFormState} from '../users'\r\nimport UserForm from './UserForm'\r\nimport { redirectToLogin } from '../utils';\r\nimport {createUser} from '../firebaseClient'\r\n\r\nconst RegisterForm = props => {\r\n    const addUser = (id, user) => {\r\n        console.log(\"new user:\"+JSON.stringify(user))\r\n        // add to firebase\r\n        createUser(user.username, user.password)\r\n        redirectToLogin(props)\r\n\t}\r\n\r\n\r\n    return (<div><h3>Register</h3>\r\n        <UserForm\r\n            editing={true}\r\n            setViewMode={Users.setViewMode}\r\n            currentUser={initialFormState}\r\n            updateUser={addUser}\r\n        />\r\n        </div>)\r\n}\r\n\r\nexport default RegisterForm","// export const loggedIn = () => {\r\n// \tvar currentUser = getCurrentUser();\r\n// \tconsole.log('logged in CurrentUser:'+JSON.stringify(currentUser))\r\n// \tif (currentUser === null) {\r\n// \t\tconsole.log('no auth token set');\r\n// \t\treturn false;\r\n// \t\t//do something like redirect to login page\r\n// \t} else {\r\n// \t\treturn true\r\n// \t}\r\n// }\r\n\r\nexport const redirectToLogin = (props) => {\r\n\tlet currentHref = props.match.path\r\n\t\tconsole.log(\"current href :\"+currentHref)\r\n\t\tconst loginHref = {\r\n\t\t\tpathname: '/login',\r\n\t\t\tstate: { from: {pathname: currentHref} }\r\n\t\t}\r\n\tprops.history.push(loginHref)\t\r\n}","import React from 'react'\r\nimport { Nav,Navbar } from \"react-bootstrap\";\r\nimport { useAuth, authSignOut } from './context/authContext'\r\n\r\n\r\n\r\n\r\nconst NavBar = (props) => {\r\n\tconst signOut = () => {\r\n\t\tauthSignOut();\r\n\t}\r\n\tconst user = useAuth().auth.data\r\n\tconsole.log(\"Nav Bar User:\"+JSON.stringify(user))\r\n\tlet isAdmin = useAuth().auth.isAdmin\r\n\tlet email = (user) ? user.email : \"\"\r\n\treturn (\r\n\t<Navbar bg=\"primary\" variant=\"dark\">\r\n\t\t\t\t\t<Nav className=\"mr-auto\">\r\n\t\t\t\t\t\t<Nav.Link href=\"/\">Home</Nav.Link>\r\n\t\t\t\t\t\t{(isAdmin) ? \r\n\t\t\t\t\t\t\t(<Nav.Link href=\"/users\">Users</Nav.Link>) : (\"\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<Nav.Link href=\"/books\">Books</Nav.Link>\r\n\t\t\t\t\t</Nav>\r\n\t\t\t\t\t<Navbar.Collapse className=\"justify-content-end\">\r\n\t\t\t\t\t\t{(email !== \"\") ?\r\n\t\t\t\t\t\t\t(<div><Navbar.Text>\r\n\t\t\t\t\t\t\t\tSigned in as : <a href=\"#login\">{email}</a>\r\n\t\t\t\t\t\t\t</Navbar.Text>\r\n\t\t\t\t\t\t\t<button onClick={() => signOut()} className=\"bg-light btn my-2 my-sm-0\" style={{marginLeft:\"10px\"}}>Signout</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t: (<a href=\"/Login\" className=\"bg-light btn my-2 my-sm-0\" >Login</a>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t</Navbar.Collapse>\r\n\t\t\t\t</Navbar>\r\n\t\t)\r\n\t}\r\n\r\nexport default NavBar;","import React from 'react'\r\nimport Users from './users'\r\nimport Books from './books'\r\nimport Login from './login'\r\nimport PrivateRoute from './PrivateRoute'\r\nimport Register from './forms/RegisterForm'\r\n//import {useCurrentUser} from './context/userContext'\r\nimport AuthProvider, {useAuth} from './context/authContext'\r\nimport NavBar from './NavBar'\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tRoute,\r\n}from \"react-router-dom\";\r\nconst App = (props) => {\r\n\tconst { authUser } = useAuth();\r\n\t// let authUser = useCurrentUser()\r\n\t// setAuthData(authUser)\r\n\t\r\n\tconsole.log('Rendering App...');\r\n  \tconsole.log(\"App Props:\"+JSON.stringify(props))\r\n\tconsole.log(\"App auth User:\"+JSON.stringify(authUser))\r\n\treturn (\r\n\t\t<AuthProvider>\r\n\t\t<Router>\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<NavBar/>\r\n\t\t\t</div>\r\n\t\t\t<br/>\r\n\t\t\t<Route path=\"/\" exact component={Home} />\r\n\t\t\t<Route path=\"/login\" exact component={Login} />\r\n\t\t\t{/* <Route path=\"/users\" render={(props) => <Users {...props} />}/> */}\r\n\t\t\t<PrivateRoute path='/users' component={Users} />\r\n\t\t\t<Route path=\"/books\" render={(props) => <Books {...props} />} />\r\n\t\t\t<Route path=\"/register\" exact component={Register}/>\r\n\t\t</Router>\r\n\t\t</AuthProvider>\r\n\t)\r\n}\r\nconst Home = () => {\r\n\treturn (<div className=\"container\">\r\n\t\t\t\t<h2>Home page</h2>\r\n\t\t\t\t<blockquote>Welcome to the Book Library!</blockquote>\r\n\t\t\t</div>);\r\n}\r\n  \r\n\r\nexport default App\r\n","import 'bootstrap/dist/css/bootstrap.min.css'\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(<App />, rootElement);\r\n"],"sourceRoot":""}